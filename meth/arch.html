

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>System Architecture &mdash; Acanban  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Database design" href="database/index.html" />
    <link rel="prev" title="Technical Choices" href="choices.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Acanban
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../obj.html">Objective</a></li>
<li class="toctree-l1"><a class="reference internal" href="../req/index.html">System Requirements</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Methodology</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="choices.html">Technical Choices</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">System Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="database/index.html">Database design</a></li>
<li class="toctree-l2"><a class="reference internal" href="uc-anal-design/index.html">Use-Case Analysis and Design</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../result.html">Results and Discussion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../conclusion.html">Conclusion and Future Work</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../appendix/index.html">Appendix</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Acanban</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Methodology</a> &raquo;</li>
        
      <li>System Architecture</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/meth/arch.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="system-architecture">
<h1>System Architecture<a class="headerlink" href="#system-architecture" title="Permalink to this headline">¶</a></h1>
<p>As previously mentioned, Acanban implements
an <a class="reference internal" href="../appendix/glossary.html#term-Asynchronous-Server-Gateway-Interface-ASGI"><span class="xref std std-term">ASGI</span></a> application.
The general architecture is illustrated in <a class="reference internal" href="#asgi"><span class="std std-numref">Figure 1</span></a>.</p>
<div class="figure align-default" id="asgi">
<p class="plantuml">
<img src="../_images/plantuml-7b59686f032bbac82a221b3bdef81cfa9ef6ea42.svg" alt="left to right direction

cloud Clients
rectangle Hypercorn &lt;&lt; ASGI Server &gt;&gt;
rectangle Quart &lt;&lt; ASGI Framework &gt;&gt;
rectangle Acanban &lt;&lt; ASGI Application &gt;&gt;

Clients &lt;--&gt; Hypercorn : HTTP
Hypercorn &lt;--&gt; Acanban
Acanban --|&gt; Quart"/></p>
<p class="caption"><span class="caption-number">Figure 1 </span><span class="caption-text">Acanban’s role in the Asynchronous Server Gateway Interface</span><a class="headerlink" href="#asgi" title="Permalink to this image">¶</a></p>
</div>
<p>All the data and business logic handling is done on the server side in order
to reduce workload for the clients, and thus the details involving the clients
are not discussed in this section.  <a class="reference internal" href="../appendix/glossary.html#term-Request"><span class="xref std std-term">Requests</span></a> to
and <a class="reference internal" href="../appendix/glossary.html#term-Response"><span class="xref std std-term">responses</span></a> from the ASGI application are transfered through
the ASGI server <a class="footnote-reference brackets" href="#server" id="id1">1</a> Hypercorn.  Typically, these messages are encrypted
via TLS/SSL <a class="footnote-reference brackets" href="#https" id="id2">2</a>.</p>
<p>Persistency layers are provided by separate servers, which in our case
are deployed on the same machine as the ASGI server and application.
This has the following benefits:</p>
<ul class="simple">
<li><p>The network latency is significantly lower within a machine.</p></li>
<li><p>We are spared from concerning with various security measures
that would have been necessary were these servers are exposed to the Internet.</p></li>
<li><p>It is more economic to maintain fewer physical (or virtual) machines.</p></li>
</ul>
<p>While files uploaded by the users and generated by the system are stored
in <a class="reference internal" href="../appendix/glossary.html#term-InterPlanetary-File-System-IPFS"><span class="xref std std-term">IPFS</span></a>, other data
are managed by <a class="reference external" href="https://rethinkdb.com">RethinkDB</a>.  With these components, our test server,
which is registered under the domain of <a class="reference external" href="https://acanban.ga">acanban.ga</a>,
has the top-level view described in <a class="reference internal" href="#ga"><span class="std std-numref">Figure 2</span></a>.</p>
<div class="figure align-default" id="ga">
<p class="plantuml">
<img src="../_images/plantuml-b26865540d43a1f44d1f5360fa32e235886f9e8e.svg" alt="left to right direction

cloud &quot;Web Browser&quot; as Browser &lt;&lt; Client &gt;&gt;

node &quot;acanban.ga&quot; as Server &lt;&lt; Server &gt;&gt; {
   database &quot;RethinkDB&quot; as db
   component Acanban
   component Hypercorn
   collections IPFS
}

Browser --- Hypercorn: HTTPS
Hypercorn -- Acanban
IPFS - Acanban
Acanban - db"/></p>
<p class="caption"><span class="caption-number">Figure 2 </span><span class="caption-text">Deployment architecture</span><a class="headerlink" href="#ga" title="Permalink to this image">¶</a></p>
</div>
<p>As both IPFS and RethinkDB are designed to be distributed and the HTTP
is distributed by nature, it is straightforward to scale the system.
A load balancer such as <a class="reference external" href="https://nginx.org">nginx</a> can be added to distribute
the requests to multiple Acanban instances as is shown in <a class="reference internal" href="#arch-alt"><span class="std std-numref">Figure 3</span></a>.
IPFS and RethinkDB can also be run as <a class="reference internal" href="../appendix/glossary.html#term-Cluster"><span class="xref std std-term">clusters</span></a>.</p>
<div class="figure align-default" id="arch-alt">
<p class="plantuml">
<img src="../_images/plantuml-50aa0f0b72474d8149d708cbe4e1db1705792218.svg" alt="&#64;startuml
cloud &quot;Web Browser&quot; as Browser &lt;&lt; Client &gt;&gt;
node nginx &lt;&lt; Load Balancing Server &gt;&gt;

node &quot;Web Server&quot; as server {
   component Acanban as acanban
   component Hypercorn as hypercorn
}

node &quot;Database cluster&quot; as db {
   database &quot;RethinkDB&quot; as r_1
   database &quot;RethinkDB&quot; as r_2
   database &quot;RethinkDB&quot; as r_3
   database &quot;RethinkDB&quot; as r_4
}

node &quot;IPFS cluster&quot; as ipfs {
   collections &quot;IPFS&quot; as i_1
   collections &quot;IPFS&quot; as i_2
   collections &quot;IPFS&quot; as i_3
   collections &quot;IPFS&quot; as i_4
}

nginx &quot;0..*&quot; --- &quot;1&quot; Browser : HTTPS
nginx &quot;1&quot; -[norank]- &quot;1..*&quot; hypercorn
hypercorn &quot;1&quot; -- &quot;1&quot; acanban
acanban &quot;1..*&quot; -- &quot;1..*&quot; db
acanban &quot;1..*&quot; -- &quot;1..*&quot; ipfs
&#64;enduml
"/></p>
<p class="caption"><span class="caption-number">Figure 3 </span><span class="caption-text">Alternative architecture with load balancer</span><a class="headerlink" href="#arch-alt" title="Permalink to this image">¶</a></p>
</div>
<p>However, we do not implement this architecture within the scope of this project,
due to following reasons:</p>
<ul class="simple">
<li><p>We do not have several servers to implement.</p></li>
<li><p>For intended use, the expected requests can go up to as many as 1000.
Load balancing for such few requests is overhead.</p></li>
</ul>
<dl class="footnote brackets">
<dt class="label" id="server"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>Not to be confused with the physical machine that <em>serves</em>
over HTTP that may run the ASGI application and other software.</p>
</dd>
<dt class="label" id="https"><span class="brackets"><a class="fn-backref" href="#id2">2</a></span></dt>
<dd><p>HTTP over TLS or SSL is often known as HTTPS.</p>
</dd>
</dl>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="database/index.html" class="btn btn-neutral float-right" title="Database design" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="choices.html" class="btn btn-neutral float-left" title="Technical Choices" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020  Ngô Ngọc Đức Huy et al..

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>